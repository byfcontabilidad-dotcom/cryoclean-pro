<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema de Reservas PRO Empresarial</title>
<style>
:root{--primary:#0d6efd;--dark:#121212;--light:#f5f5f5}
body{margin:0;font-family:Segoe UI,Arial;background:var(--dark);color:white}
header{padding:20px;text-align:center;background:#000}
section{padding:20px;max-width:1200px;margin:auto}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:15px}
.card{background:#1c1c1c;padding:15px;border-radius:12px}
button{background:var(--primary);border:none;padding:10px 15px;border-radius:6px;color:white;cursor:pointer}
input,textarea,select{width:100%;padding:8px;border-radius:5px;border:none;margin:6px 0}
.hidden{display:none}
.admin{border:2px dashed var(--primary);padding:20px;border-radius:12px;margin-top:30px}
img{max-width:100%;border-radius:10px}
.flex{display:flex;gap:10px;flex-wrap:wrap}
</style>
</head>
<body>
<header>
<h1>üöÄ Sistema de Reservas PRO Empresarial</h1>
<p>Carrito + Agenda + Pagos + Panel Admin Completo</p>
</header>

<section id="servicios"></section>

<section>
<h2>üõí Carrito</h2>
<div id="cart"></div>
<h3 id="total"></h3>
<button onclick="abrirAgenda()">Agendar</button>
</section>

<section id="agenda" class="hidden">
<h2>üìÖ Datos de Reserva</h2>
<input id="nombre" placeholder="Nombre completo">
<input id="email" placeholder="Correo electr√≥nico">
<input id="telefono" placeholder="Tel√©fono">
<input type="date" id="fecha">
<select id="pago"></select>
<button onclick="confirmarReserva()">Confirmar y Pagar</button>
</section>

<section id="panelLogin" class="admin">
<h2>üîê Acceso Administrador</h2>
<input id="adminUser" placeholder="Usuario">
<input id="adminPass" type="password" placeholder="Contrase√±a">
<button onclick="loginAdmin()">Ingresar</button>
</section>

<section id="panelAdmin" class="admin hidden">
<h2>‚öôÔ∏è Panel Administrador Empresarial</h2>

<h3>Servicios</h3>
<div id="adminServicios"></div>

<h3>Agregar / Editar Servicio</h3>
<input id="sName" placeholder="Nombre">
<input id="sPrice" type="number" placeholder="Precio">
<input id="sIcon" placeholder="Icono (emoji)">
<input id="sImg" placeholder="URL Imagen">
<textarea id="sDesc" placeholder="Descripci√≥n"></textarea>
<button onclick="addServicio()">Guardar Servicio</button>

<h3>M√©todos de Pago con URL</h3>
<div id="adminPagos"></div>
<input id="pName" placeholder="Nombre del m√©todo">
<input id="pUrl" placeholder="URL de pago">
<button onclick="addPago()">Agregar m√©todo</button>
</section>

<script>
let servicios = JSON.parse(localStorage.getItem('servicios')) || [
 {id:1,name:'Corte',price:5,icon:'‚úÇÔ∏è',img:'https://images.unsplash.com/photo-1517836357463-d25dfeac3438',desc:'Corte cl√°sico profesional'},
 {id:2,name:'Barba',price:3,icon:'üßî',img:'https://images.unsplash.com/photo-1503342217505-b0a15ec3261c',desc:'Perfilado premium'}
];

let pagos = JSON.parse(localStorage.getItem('pagos')) || [
 {name:'PayPhone',url:'https://payphone.app'},
 {name:'Transferencia',url:'#'},
 {name:'BTC',url:'https://commerce.coinbase.com'},
 {name:'USDT',url:'https://nowpayments.io'}
];

let cart=[];

function renderServicios(){
 let html='<div class="grid">';
 servicios.forEach(s=>{
 html+=`<div class="card"><img src="${s.img}"><h3>${s.icon} ${s.name}</h3><p>${s.desc}</p><b>$${s.price.toFixed(2)}</b><br><button onclick="addCart(${s.id})">Agregar</button></div>`;
 });
 html+='</div>';
 document.getElementById('servicios').innerHTML=html;
}

function addCart(id){
 let item=cart.find(i=>i.id===id);
 if(item)item.qty++;
 else{ let s=servicios.find(x=>x.id===id); cart.push({...s,qty:1}); }
 renderCart();
}

function renderCart(){
 let html=''; let total=0;
 cart.forEach(i=>{ let sub=i.qty*i.price; total+=sub;
 html+=`<div>${i.icon} ${i.name} x${i.qty} = $${sub.toFixed(2)}</div>`;
 });
 document.getElementById('cart').innerHTML=html||'Vac√≠o';
 document.getElementById('total').innerText='Total: $'+total.toFixed(2);
}

function abrirAgenda(){ if(cart.length==0)return alert('Carrito vac√≠o'); document.getElementById('agenda').classList.remove('hidden'); renderPagos(); }

function renderPagos(){ let sel=document.getElementById('pago'); sel.innerHTML=''; pagos.forEach((p,i)=>{ sel.innerHTML+=`<option value="${i}">${p.name}</option>`; }); }

function confirmarReserva(){
 let p=pagos[document.getElementById('pago').value];
 alert('Reserva creada. Redirigiendo a pago...');
 window.open(p.url,'_blank');
 cart=[]; renderCart(); document.getElementById('agenda').classList.add('hidden');
}

// ADMIN
const ADMIN_USER='admin'; const ADMIN_PASS='1234';

function loginAdmin(){
 let u=document.getElementById('adminUser').value;
 let p=document.getElementById('adminPass').value;
 if(u===ADMIN_USER && p===ADMIN_PASS){
 document.getElementById('panelLogin').classList.add('hidden');
 document.getElementById('panelAdmin').classList.remove('hidden');
 renderAdmin();
 } else alert('Credenciales incorrectas');
}

function renderAdmin(){
 let sHtml=''; servicios.forEach((s,i)=>{
 sHtml+=`<div class="flex"><img src="${s.img}" width="60"><div>${s.name} - $${s.price}</div><button onclick="delServicio(${i})">‚ùå</button></div>`;
 });
 document.getElementById('adminServicios').innerHTML=sHtml;

 let pHtml=''; pagos.forEach((p,i)=>{
 pHtml+=`<div>${p.name} ‚Üí ${p.url} <button onclick="delPago(${i})">‚ùå</button></div>`;
 });
 document.getElementById('adminPagos').innerHTML=pHtml;
}

function addServicio(){
 servicios.push({id:Date.now(),name:sName.value,price:+sPrice.value,icon:sIcon.value,img:sImg.value,desc:sDesc.value});
 localStorage.setItem('servicios',JSON.stringify(servicios));
 renderServicios(); renderAdmin();
}
function delServicio(i){ servicios.splice(i,1); localStorage.setItem('servicios',JSON.stringify(servicios)); renderServicios(); renderAdmin(); }

function addPago(){ pagos.push({name:pName.value,url:pUrl.value}); localStorage.setItem('pagos',JSON.stringify(pagos)); renderAdmin(); }
function delPago(i){ pagos.splice(i,1); localStorage.setItem('pagos',JSON.stringify(pagos)); renderAdmin(); }

renderServicios(); renderCart();
</script>
</body>
</html>
